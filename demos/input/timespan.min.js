var TimeUnit;(function(TimeUnit){TimeUnit[TimeUnit["Ticks"]=0]="Ticks";TimeUnit[TimeUnit["Milliseconds"]=1]="Milliseconds";TimeUnit[TimeUnit["Seconds"]=2]="Seconds";TimeUnit[TimeUnit["Minutes"]=3]="Minutes";TimeUnit[TimeUnit["Hours"]=4]="Hours";TimeUnit[TimeUnit["Days"]=5]="Days"})(TimeUnit||(TimeUnit={}));var TimeSpan=function(){function TimeSpan(days,hours,minutes,seconds,milliseconds){this.isTimeSpan=true;function interval(value,scale){var tmp=value*scale;var millis=tmp+(value>=0?.5:-.5);return Math.floor(millis)*1e4}if(arguments.length===0){this._ticks=0}else if(arguments.length===1){if(arguments[0]instanceof TimeSpan===true){this._ticks=arguments[0].ticks}else if(typeof arguments[0]==="number"){this._ticks=arguments[0]}else{throw Error("Invalid parameter")}}else if(arguments.length===2&&typeof arguments[0]==="number"&&typeof arguments[1]==="number"&&arguments[1]>=0&&arguments[1]<=5){switch(arguments[1]){case 0:break;case 1:this._ticks=interval(arguments[0],1);break;case 2:this._ticks=interval(arguments[0],1e3);break;case 3:this._ticks=interval(arguments[0],6e4);break;case 4:this._ticks=interval(arguments[0],36e5);break;case 5:this._ticks=interval(arguments[0],864e5);break;default:throw Error("Invalid TimeUnit")}}else if(!isNaN(days)&&!isNaN(hours)&&!isNaN(minutes)){if(isNaN(seconds)){seconds=0}if(isNaN(milliseconds)){milliseconds=0}var totalMilliseconds=(days*3600*24+hours*3600+minutes*60+seconds)*1e3+milliseconds;this._ticks=totalMilliseconds*1e4}else{throw Error("Invalid parameters")}}Object.defineProperty(TimeSpan.prototype,"totalDays",{get:function(){return this._ticks*1.1574074074074074e-12},enumerable:true,configurable:true});Object.defineProperty(TimeSpan.prototype,"totalHours",{get:function(){return this._ticks*2.7777777777777777e-11},enumerable:true,configurable:true});Object.defineProperty(TimeSpan.prototype,"totalMinutes",{get:function(){return this._ticks*1.6666666666667e-9},enumerable:true,configurable:true});Object.defineProperty(TimeSpan.prototype,"totalSeconds",{get:function(){return this._ticks*(1/1e7)},enumerable:true,configurable:true});Object.defineProperty(TimeSpan.prototype,"totalMilliseconds",{get:function(){return this._ticks*(1/1e4)},enumerable:true,configurable:true});Object.defineProperty(TimeSpan.prototype,"ticks",{get:function(){return this._ticks},set:function(value){if(value===undefined||isNaN(value)){throw Error("No value is supplied")}this._ticks=value},enumerable:true,configurable:true});Object.defineProperty(TimeSpan.prototype,"milliseconds",{get:function(){return Math.floor(this._ticks/1e4)%1e3},enumerable:true,configurable:true});Object.defineProperty(TimeSpan.prototype,"seconds",{get:function(){return Math.floor(this._ticks/1e7)%60},enumerable:true,configurable:true});Object.defineProperty(TimeSpan.prototype,"minutes",{get:function(){return Math.floor(this._ticks/6e8)%60},enumerable:true,configurable:true});Object.defineProperty(TimeSpan.prototype,"hours",{get:function(){return Math.floor(this._ticks/36e9)%24},enumerable:true,configurable:true});Object.defineProperty(TimeSpan.prototype,"days",{get:function(){return Math.floor(this._ticks/864e9)},enumerable:true,configurable:true});TimeSpan.prototype.add=function(a,b){if(arguments.length===1&&a instanceof TimeSpan&&a.isTimeSpan){this._ticks+=a.ticks}else if(arguments.length===2&&typeof a==="number"&&typeof b==="number"&&b>=0&&b<=5){switch(arguments[1]){case 0:this.ticks+=a;break;case 1:this._ticks+=a*1e4;break;case 2:this._ticks+=a*1e7;break;case 3:this._ticks+=a*6e8;break;case 4:this._ticks+=a*36e9;break;case 5:this._ticks+=a*864e9;break;default:throw Error("Invalid TimeUnit")}}else{throw Error("Invalid parameter")}return this};TimeSpan.add=function(timespan1,timespan2){return new TimeSpan(timespan1.ticks+timespan2.ticks)};TimeSpan.prototype.subtract=function(a,b){if(arguments.length===1&&a instanceof TimeSpan&&a.isTimeSpan){this.ticks-=a.ticks}else if(arguments.length===2&&typeof a==="number"&&typeof b==="number"&&b>=0&&b<=5){switch(arguments[1]){case 0:this.ticks-=a;break;case 1:this._ticks-=a*1e4;break;case 2:this._ticks-=a*1e7;break;case 3:this._ticks-=a*6e8;break;case 4:this._ticks-=a*36e9;break;case 5:this._ticks-=a*864e9;break;default:throw Error("Invalid TimeUnit")}}else{throw Error("Invalid parameter")}return this};TimeSpan.subtract=function(timespan1,timespan2){return new TimeSpan(timespan1.ticks-timespan2.ticks)};TimeSpan.compare=function(timespan1,timespan2){if(timespan1.ticks>timespan2.ticks){return 1}if(timespan1.ticks<timespan2.ticks){return-1}return 0};TimeSpan.prototype.negate=function(){this.ticks=-this.ticks};TimeSpan.getVersion=function(){return"1.0.0"};TimeSpan.prototype.format=function(format){var days;var hours;var minutes;var seconds;var milliseconds;if(format===void 0){hours=("00"+this.hours).slice(-"00".length);minutes=("00"+this.minutes).slice(-"00".length);seconds=("00"+this.seconds).slice(-"00".length);return hours+":"+minutes+":"+seconds}else{var containsDays=format.indexOf("~dd")>-1;var containsHours=format.indexOf("~hh")>-1;var containsMinutes=format.indexOf("~mm")>-1;var containsSeconds=format.indexOf("~ss")>-1;var containsMilliseconds=format.indexOf("~ms")>-1;var containsAnything=containsDays||containsHours||containsMinutes||containsSeconds||containsMilliseconds;if(containsAnything){days=("00"+this.days).slice(-"00".length);hours=("00"+this.hours).slice(-"00".length);minutes=("00"+this.minutes).slice(-"00".length);seconds=("00"+this.seconds).slice(-"00".length);milliseconds=("00"+this.milliseconds).slice(-"00".length);return format.replace("~dd",days).replace("~hh",hours).replace("~mm",minutes).replace("~ss",seconds).replace("~ms",milliseconds)}else{throw Error("Invalid format string")}}};TimeSpan.parse=function(formattedtext){var ts=new TimeSpan;var result;if(/^(\d{2})\:(\d{2})\:(\d{2})$/.test(formattedtext)){result=formattedtext.match(/^(\d{2})\:(\d{2})\:(\d{2})$/);ts.add(parseInt(result[1],10),4);ts.add(parseInt(result[2],10),3);ts.add(parseInt(result[3],10),2)}else if(/^(\d{2}):(\d{2})$/.test(formattedtext)){result=formattedtext.match(/^(\d{2}):(\d{2})$/);ts.add(parseInt(result[1],10),4);ts.add(parseInt(result[2],10),3)}else if(/^(\d{2})(\d{2})(\d{2})$/.test(formattedtext)){result=formattedtext.match(/^(\d{2})(\d{2})(\d{2})$/);ts.add(parseInt(result[1],10),4);ts.add(parseInt(result[2],10),3);ts.add(parseInt(result[3],10),2)}else if(/^(\d{2})(\d{2})$/.test(formattedtext)){result=formattedtext.match(/^(\d{2})(\d{2})$/);ts.add(parseInt(result[1],10),4);ts.add(parseInt(result[2],10),3)}else if(/^(\d{2})$/.test(formattedtext)){result=formattedtext.match(/^(\d{2})$/);ts.add(parseInt(result[1],10),4)}else if(/^(\d{2})\:(\d{2})\:(\d{2})\.(\d{4})$/.test(formattedtext)){result=formattedtext.match(/^(\d{2})\:(\d{2})\:(\d{2})\.(\d{4})$/);ts.add(parseInt(result[1],10),4);ts.add(parseInt(result[2],10),3);ts.add(parseInt(result[3],10),2);ts.add(parseInt(result[4],10)/10,1)}else if(/^(\d{2})(\d{2})(\d{2})\.(\d{4})$/.test(formattedtext)){result=formattedtext.match(/^(\d{2})(\d{2})(\d{2})\.(\d{4})$/);ts.add(parseInt(result[1],10),4);ts.add(parseInt(result[2],10),3);ts.add(parseInt(result[3],10),2);ts.add(parseInt(result[4],10)/10,1)}else{throw Error("Invalid format")}return ts};return TimeSpan}();